<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸Œë¼ìš°ì € ë¬¸ì œ í’€ê¸° í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .error { color: red; }
        .success { color: green; }
        .info { color: blue; }
        button { margin: 5px; padding: 10px; }
        .question-display { background: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª í™”í•™ í•™ìŠµ í”„ë¡œê·¸ë¨ - ë¬¸ì œ í’€ê¸° í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-section">
        <h3>1. ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ìƒíƒœ í™•ì¸</h3>
        <div id="script-status"></div>
    </div>
    
    <div class="test-section">
        <h3>2. ë¬¸ì œ ìƒì„± í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testProblemGeneration()">ë¬¸ì œ ìƒì„± í…ŒìŠ¤íŠ¸</button>
        <div id="generation-result"></div>
    </div>
    
    <div class="test-section">
        <h3>3. ì‹¤ì œ ë¬¸ì œ í‘œì‹œ</h3>
        <div>
            <label>ë‚œì´ë„: </label>
            <select id="test-difficulty">
                <option value="easy">ì‰¬ì›€</option>
                <option value="medium" selected>ë³´í†µ</option>
                <option value="hard">ì–´ë ¤ì›€</option>
            </select>
            <button onclick="loadTestQuestion()">ë¬¸ì œ ë¶ˆëŸ¬ì˜¤ê¸°</button>
        </div>
        <div id="test-question-display" class="question-display" style="display:none;"></div>
    </div>
    
    <div class="test-section">
        <h3>4. DOM ìš”ì†Œ í™•ì¸</h3>
        <button onclick="checkDOMElements()">DOM ìš”ì†Œ í™•ì¸</button>
        <div id="dom-status"></div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© -->
    <script src="problems.js"></script>
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ìƒíƒœ í™•ì¸
        document.addEventListener('DOMContentLoaded', function() {
            checkScriptLoading();
        });

        function checkScriptLoading() {
            const statusDiv = document.getElementById('script-status');
            let status = '';
            
            // problemTemplates í™•ì¸
            if (typeof problemTemplates !== 'undefined') {
                status += '<p class="success">âœ… problemTemplates ë¡œë“œë¨</p>';
                status += `<p class="info">ë‚œì´ë„ë³„ í…œí”Œë¦¿ ê°œìˆ˜: ${Object.keys(problemTemplates).join(', ')}</p>`;
            } else {
                status += '<p class="error">âŒ problemTemplates ë¡œë“œë˜ì§€ ì•ŠìŒ</p>';
            }
            
            // generateProblem í•¨ìˆ˜ í™•ì¸
            if (typeof generateProblem === 'function') {
                status += '<p class="success">âœ… generateProblem í•¨ìˆ˜ ë¡œë“œë¨</p>';
            } else {
                status += '<p class="error">âŒ generateProblem í•¨ìˆ˜ ë¡œë“œë˜ì§€ ì•ŠìŒ</p>';
            }
            
            statusDiv.innerHTML = status;
        }

        function testProblemGeneration() {
            const resultDiv = document.getElementById('generation-result');
            let result = '<h4>ë¬¸ì œ ìƒì„± í…ŒìŠ¤íŠ¸ ê²°ê³¼:</h4>';
            
            const difficulties = ['easy', 'medium', 'hard'];
            
            difficulties.forEach(difficulty => {
                try {
                    console.log(`Testing ${difficulty} difficulty...`);
                    const problem = generateProblem(difficulty);
                    
                    if (problem && problem.question) {
                        result += `<p class="success">âœ… ${difficulty}: "${problem.question.substring(0, 50)}..."</p>`;
                        result += `<p class="info">   íƒ€ì…: ${problem.type}, ì ìˆ˜: ${problem.points}</p>`;
                    } else {
                        result += `<p class="error">âŒ ${difficulty}: ë¬¸ì œ ìƒì„± ì‹¤íŒ¨</p>`;
                    }
                } catch (error) {
                    result += `<p class="error">âŒ ${difficulty}: ì˜¤ë¥˜ - ${error.message}</p>`;
                    console.error(`Error testing ${difficulty}:`, error);
                }
            });
            
            resultDiv.innerHTML = result;
        }

        function loadTestQuestion() {
            const difficulty = document.getElementById('test-difficulty').value;
            const displayDiv = document.getElementById('test-question-display');
            
            try {
                const problem = generateProblem(difficulty);
                
                if (problem) {
                    let html = `
                        <h4>ìƒì„±ëœ ë¬¸ì œ (${difficulty}):</h4>
                        <p><strong>ë¬¸ì œ:</strong> ${problem.question}</p>
                        <p><strong>íƒ€ì…:</strong> ${problem.type}</p>
                    `;
                    
                    if (problem.type === 'multiple-choice' && problem.options) {
                        html += '<p><strong>ì„ íƒì§€:</strong></p><ul>';
                        problem.options.forEach((option, index) => {
                            const isCorrect = index === problem.correctIndex;
                            html += `<li${isCorrect ? ' style="color: green; font-weight: bold;"' : ''}>${option} ${isCorrect ? '(ì •ë‹µ)' : ''}</li>`;
                        });
                        html += '</ul>';
                    }
                    
                    if (problem.explanation) {
                        html += `<p><strong>ì„¤ëª…:</strong> ${problem.explanation}</p>`;
                    }
                    
                    if (problem.hint) {
                        html += `<p><strong>íŒíŠ¸:</strong> ${problem.hint}</p>`;
                    }
                    
                    displayDiv.innerHTML = html;
                    displayDiv.style.display = 'block';
                } else {
                    displayDiv.innerHTML = '<p class="error">ë¬¸ì œ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>';
                    displayDiv.style.display = 'block';
                }
            } catch (error) {
                displayDiv.innerHTML = `<p class="error">ì˜¤ë¥˜ ë°œìƒ: ${error.message}</p>`;
                displayDiv.style.display = 'block';
                console.error('Error loading test question:', error);
            }
        }

        function checkDOMElements() {
            const statusDiv = document.getElementById('dom-status');
            
            // ì£¼ìš” DOM ìš”ì†Œë“¤ì´ ë©”ì¸ index.htmlì— ìˆëŠ”ì§€ ì‹œë®¬ë ˆì´ì…˜
            const expectedElements = [
                'question-content',
                'answer-section', 
                'submit-btn',
                'next-btn',
                'feedback',
                'question-number',
                'score'
            ];
            
            let status = '<h4>í•„ìš”í•œ DOM ìš”ì†Œë“¤:</h4>';
            
            expectedElements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element) {
                    status += `<p class="success">âœ… ${elementId} ì¡´ì¬</p>`;
                } else {
                    status += `<p class="error">âŒ ${elementId} ì—†ìŒ (ë©”ì¸ í˜ì´ì§€ì—ì„œ í™•ì¸ í•„ìš”)</p>`;
                }
            });
            
            statusDiv.innerHTML = status;
        }

        // ì½˜ì†”ì— ì¶”ê°€ ì •ë³´ ì¶œë ¥
        console.log('ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œë¨');
        console.log('window.generateProblem:', typeof window.generateProblem);
        console.log('problemTemplates:', typeof window.problemTemplates);
    </script>
</body>
</html>