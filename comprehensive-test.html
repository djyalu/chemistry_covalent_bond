<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í™”í•™ í•™ìŠµ í”„ë¡œê·¸ë¨ ì¢…í•© í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background-color: #f0f0f0;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 5px;
            background: #fafafa;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 3px;
        }
        .pass { 
            background-color: #d4edda; 
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail { 
            background-color: #f8d7da; 
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
        }
        pre { 
            background: #f4f4f4; 
            padding: 10px; 
            overflow-x: auto;
            border-radius: 3px;
            font-size: 12px;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #2196F3;
            padding-bottom: 10px;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .stat-box {
            flex: 1;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 5px;
            text-align: center;
        }
        .stat-box h3 {
            margin: 0;
            color: #1976d2;
        }
        .error-list {
            background: #ffebee;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .error-list ul {
            margin: 5px 0;
            padding-left: 20px;
        }
        .content-preview {
            background: #f5f5f5;
            padding: 10px;
            margin: 5px 0;
            border-radius: 3px;
            font-size: 14px;
        }
        .molecule-display {
            display: inline-block;
            margin: 5px;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #2196F3;
            color: white;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #4caf50;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª í™”í•™ í•™ìŠµ í”„ë¡œê·¸ë¨ ì¢…í•© í…ŒìŠ¤íŠ¸ ë³´ê³ ì„œ</h1>
        <p>ìƒì„± ì‹œê°„: <span id="test-time"></span></p>
        
        <div class="stats" id="test-summary">
            <!-- í…ŒìŠ¤íŠ¸ ìš”ì•½ í†µê³„ê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>

        <!-- 1. ë¬¸ì œ ìƒì„± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>1. ë¬¸ì œ ìƒì„± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</h2>
            <div id="problem-generation-test"></div>
        </div>

        <!-- 2. í•™ìŠµ ì»¨í…ì¸  ê²€ì¦ -->
        <div class="test-section">
            <h2>2. í•™ìŠµ ì»¨í…ì¸  ê²€ì¦</h2>
            <div id="content-validation-test"></div>
        </div>

        <!-- 3. ë¶„ì ë°ì´í„° ì •í™•ì„± -->
        <div class="test-section">
            <h2>3. ë¶„ì ë°ì´í„° ì •í™•ì„± ê²€ì‚¬</h2>
            <div id="molecule-accuracy-test"></div>
        </div>

        <!-- 4. í–¥ìƒëœ ë¬¸ì œ ìœ í˜• í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>4. í–¥ìƒëœ ë¬¸ì œ ìœ í˜• í…ŒìŠ¤íŠ¸</h2>
            <div id="enhanced-problems-test"></div>
        </div>

        <!-- 5. ê²Œì„í™” ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>5. ê²Œì„í™” ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</h2>
            <div id="gamification-test"></div>
        </div>

        <!-- 6. ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>6. ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸</h2>
            <div id="integration-test"></div>
        </div>

        <!-- ìµœì¢… ë³´ê³ ì„œ -->
        <div class="test-section">
            <h2>ìµœì¢… í…ŒìŠ¤íŠ¸ ë³´ê³ ì„œ</h2>
            <div id="final-report"></div>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="app.js"></script>
    <script src="problems.js"></script>
    <script src="content.js"></script>
    <script src="molecule-viewer.js"></script>
    <script src="enhanced-problems.js"></script>
    <script src="gamification.js"></script>
    
    <script>
        // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥
        let testResults = {
            total: 0,
            passed: 0,
            failed: 0,
            warnings: 0,
            errors: []
        };

        // í˜„ì¬ ì‹œê°„ í‘œì‹œ
        document.getElementById('test-time').textContent = new Date().toLocaleString('ko-KR');

        // í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
        function runTest(testName, testFunction, container) {
            testResults.total++;
            const resultDiv = document.createElement('div');
            resultDiv.className = 'test-result';
            
            try {
                const result = testFunction();
                if (result.status === 'pass') {
                    testResults.passed++;
                    resultDiv.className += ' pass';
                    resultDiv.innerHTML = `<strong>âœ“ ${testName}</strong><br>${result.message}`;
                } else if (result.status === 'warning') {
                    testResults.warnings++;
                    resultDiv.className += ' warning';
                    resultDiv.innerHTML = `<strong>âš  ${testName}</strong><br>${result.message}`;
                } else {
                    testResults.failed++;
                    resultDiv.className += ' fail';
                    resultDiv.innerHTML = `<strong>âœ— ${testName}</strong><br>${result.message}`;
                    testResults.errors.push({ test: testName, error: result.message });
                }
                
                if (result.details) {
                    resultDiv.innerHTML += `<pre>${JSON.stringify(result.details, null, 2)}</pre>`;
                }
            } catch (error) {
                testResults.failed++;
                resultDiv.className += ' fail';
                resultDiv.innerHTML = `<strong>âœ— ${testName}</strong><br>ì˜¤ë¥˜ ë°œìƒ: ${error.message}`;
                testResults.errors.push({ test: testName, error: error.message });
            }
            
            container.appendChild(resultDiv);
        }

        // 1. ë¬¸ì œ ìƒì„± ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
        const problemTestContainer = document.getElementById('problem-generation-test');
        
        // ë‚œì´ë„ë³„ ë¬¸ì œ ìƒì„± í…ŒìŠ¤íŠ¸
        ['easy', 'medium', 'hard'].forEach(difficulty => {
            runTest(`${difficulty} ë‚œì´ë„ ë¬¸ì œ ìƒì„±`, () => {
                const problems = [];
                for (let i = 0; i < 5; i++) {
                    problems.push(generateProblem(difficulty));
                }
                
                // ë¬¸ì œ ìœ í˜• ë‹¤ì–‘ì„± í™•ì¸
                const types = new Set(problems.map(p => p.type));
                if (types.size < 2) {
                    return { 
                        status: 'warning', 
                        message: `ë¬¸ì œ ìœ í˜• ë‹¤ì–‘ì„± ë¶€ì¡± (${types.size}ê°œ ìœ í˜•ë§Œ ìƒì„±ë¨)`,
                        details: { generatedTypes: Array.from(types) }
                    };
                }
                
                // í•„ìˆ˜ ì†ì„± í™•ì¸
                const invalidProblems = problems.filter(p => 
                    !p.question || !p.type || p.points === undefined
                );
                
                if (invalidProblems.length > 0) {
                    return { 
                        status: 'fail', 
                        message: `${invalidProblems.length}ê°œ ë¬¸ì œì— í•„ìˆ˜ ì†ì„± ëˆ„ë½`,
                        details: invalidProblems
                    };
                }
                
                return { 
                    status: 'pass', 
                    message: `${problems.length}ê°œ ë¬¸ì œ ìƒì„± ì„±ê³µ (${types.size}ê°œ ìœ í˜•)`,
                    details: { 
                        sampleProblem: problems[0],
                        types: Array.from(types)
                    }
                };
            }, problemTestContainer);
        });

        // ì£¼ì œë³„ ë¬¸ì œ ìƒì„± í…ŒìŠ¤íŠ¸
        ['covalent', 'ionic', 'molecular', 'bonding'].forEach(topic => {
            runTest(`${topic} ì£¼ì œ ë¬¸ì œ ìƒì„±`, () => {
                try {
                    const problem = generateTopicProblem(topic, 'medium');
                    if (!problem || !problem.question) {
                        return { status: 'fail', message: 'ë¬¸ì œ ìƒì„± ì‹¤íŒ¨' };
                    }
                    return { 
                        status: 'pass', 
                        message: 'ì£¼ì œë³„ ë¬¸ì œ ìƒì„± ì„±ê³µ',
                        details: { question: problem.question }
                    };
                } catch (error) {
                    return { status: 'fail', message: error.message };
                }
            }, problemTestContainer);
        });

        // 2. í•™ìŠµ ì»¨í…ì¸  ê²€ì¦
        const contentTestContainer = document.getElementById('content-validation-test');
        
        // ê° ì£¼ì œ ì»¨í…ì¸  í™•ì¸
        ['covalent', 'ionic', 'molecular', 'bonding'].forEach(topic => {
            runTest(`${topic} í•™ìŠµ ì»¨í…ì¸ `, () => {
                const content = getTopicContent(topic);
                
                if (!content || content.includes('ì¤€ë¹„ ì¤‘')) {
                    return { status: 'fail', message: 'ì»¨í…ì¸  ì—†ìŒ ë˜ëŠ” ë¯¸ì™„ì„±' };
                }
                
                // HTML êµ¬ì¡° ê²€ì¦
                const hasTitle = content.includes('<h2>');
                const hasContent = content.includes('<p>') || content.includes('<ul>');
                const hasButton = content.includes('ë¬¸ì œ í’€ì–´ë³´ê¸°');
                
                if (!hasTitle || !hasContent) {
                    return { status: 'warning', message: 'ì»¨í…ì¸  êµ¬ì¡° ë¶ˆì™„ì „' };
                }
                
                // ê³¼í•™ì  ì •í™•ì„± í‚¤ì›Œë“œ ì²´í¬
                const scientificTerms = {
                    covalent: ['ì „ì', 'ê³µìœ ', 'ë¹„ê¸ˆì†'],
                    ionic: ['ì–‘ì´ì˜¨', 'ìŒì´ì˜¨', 'ì •ì „ê¸°'],
                    molecular: ['VSEPR', '3ì°¨ì›', 'êµ¬ì¡°'],
                    bonding: ['ê²°í•© ì—ë„ˆì§€', 'ë‹¨ì¼ê²°í•©', 'ì´ì¤‘ê²°í•©']
                };
                
                const expectedTerms = scientificTerms[topic];
                const foundTerms = expectedTerms.filter(term => content.includes(term));
                
                if (foundTerms.length < expectedTerms.length * 0.7) {
                    return { 
                        status: 'warning', 
                        message: 'í•µì‹¬ ê³¼í•™ ìš©ì–´ ë¶€ì¡±',
                        details: { 
                            expected: expectedTerms,
                            found: foundTerms
                        }
                    };
                }
                
                return { 
                    status: 'pass', 
                    message: 'ì»¨í…ì¸  êµ¬ì¡° ë° ë‚´ìš© ì ì ˆ',
                    details: { 
                        contentLength: content.length,
                        hasQuizLink: hasButton
                    }
                };
            }, contentTestContainer);
        });

        // 3. ë¶„ì ë°ì´í„° ì •í™•ì„± ê²€ì‚¬
        const moleculeTestContainer = document.getElementById('molecule-accuracy-test');
        
        runTest('ë¶„ì ì‹œê°í™” ì‹œìŠ¤í…œ', () => {
            const viewer = new MoleculeViewer('test-viewer');
            const molecules = Object.keys(viewer.molecules);
            
            if (molecules.length < 5) {
                return { status: 'fail', message: 'ë¶„ì ë°ì´í„° ë¶€ì¡±' };
            }
            
            // ê° ë¶„ì ë°ì´í„° ê²€ì¦
            const validationResults = molecules.map(molName => {
                const mol = viewer.molecules[molName];
                return {
                    name: molName,
                    valid: mol.atoms && mol.bonds && mol.name,
                    atomCount: mol.atoms ? mol.atoms.length : 0,
                    bondCount: mol.bonds ? mol.bonds.length : 0
                };
            });
            
            const invalidMolecules = validationResults.filter(r => !r.valid);
            
            if (invalidMolecules.length > 0) {
                return { 
                    status: 'fail', 
                    message: `${invalidMolecules.length}ê°œ ë¶„ì ë°ì´í„° ì˜¤ë¥˜`,
                    details: invalidMolecules
                };
            }
            
            // í™”í•™ì  ì •í™•ì„± ê²€ì‚¬
            const chemicalChecks = {
                'H2O': { expectedAtoms: 3, expectedBonds: 2 },
                'CH4': { expectedAtoms: 5, expectedBonds: 4 },
                'CO2': { expectedAtoms: 3, expectedBonds: 2 },
                'NH3': { expectedAtoms: 4, expectedBonds: 3 }
            };
            
            const chemicalErrors = [];
            Object.entries(chemicalChecks).forEach(([molName, expected]) => {
                const mol = viewer.molecules[molName];
                if (mol) {
                    if (mol.atoms.length !== expected.expectedAtoms) {
                        chemicalErrors.push(`${molName}: ì›ì ìˆ˜ ì˜¤ë¥˜`);
                    }
                    if (mol.bonds.length !== expected.expectedBonds) {
                        chemicalErrors.push(`${molName}: ê²°í•© ìˆ˜ ì˜¤ë¥˜`);
                    }
                }
            });
            
            if (chemicalErrors.length > 0) {
                return { 
                    status: 'fail', 
                    message: 'í™”í•™ì  ì˜¤ë¥˜ ë°œê²¬',
                    details: chemicalErrors
                };
            }
            
            return { 
                status: 'pass', 
                message: `${molecules.length}ê°œ ë¶„ì ë°ì´í„° ê²€ì¦ ì™„ë£Œ`,
                details: validationResults
            };
        }, moleculeTestContainer);

        // 4. í–¥ìƒëœ ë¬¸ì œ ìœ í˜• í…ŒìŠ¤íŠ¸
        const enhancedTestContainer = document.getElementById('enhanced-problems-test');
        
        ['matching', 'drag-drop', 'sequence', 'simulation', 'drawing'].forEach(type => {
            runTest(`${type} ë¬¸ì œ ìœ í˜•`, () => {
                try {
                    const problem = generateEnhancedProblem(type, 'medium');
                    
                    if (!problem || !problem.type) {
                        return { status: 'fail', message: 'ë¬¸ì œ ìƒì„± ì‹¤íŒ¨' };
                    }
                    
                    // í•„ìˆ˜ ì†ì„± í™•ì¸
                    const requiredFields = {
                        'matching': ['leftItems', 'rightItems', 'correctPairs'],
                        'drag-drop': ['question'],
                        'sequence': ['steps', 'correctOrder'],
                        'simulation': ['question'],
                        'drawing': ['targetMolecule', 'requiredElements']
                    };
                    
                    const required = requiredFields[type] || ['question'];
                    const missing = required.filter(field => !problem[field]);
                    
                    if (missing.length > 0) {
                        return { 
                            status: 'fail', 
                            message: `í•„ìˆ˜ í•„ë“œ ëˆ„ë½: ${missing.join(', ')}`,
                            details: problem
                        };
                    }
                    
                    return { 
                        status: 'pass', 
                        message: 'í–¥ìƒëœ ë¬¸ì œ ìƒì„± ì„±ê³µ',
                        details: { 
                            type: problem.type,
                            points: problem.points,
                            hasQuestion: !!problem.question
                        }
                    };
                } catch (error) {
                    return { status: 'fail', message: error.message };
                }
            }, enhancedTestContainer);
        });

        // 5. ê²Œì„í™” ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
        const gamificationTestContainer = document.getElementById('gamification-test');
        
        runTest('ê²Œì„ ì‹œìŠ¤í…œ ì´ˆê¸°í™”', () => {
            if (!gameSystem) {
                return { status: 'fail', message: 'gameSystem ê°ì²´ ì—†ìŒ' };
            }
            
            const playerData = gameSystem.playerData;
            if (!playerData || !playerData.username) {
                return { status: 'fail', message: 'í”Œë ˆì´ì–´ ë°ì´í„° ì´ˆê¸°í™” ì‹¤íŒ¨' };
            }
            
            return { 
                status: 'pass', 
                message: 'ê²Œì„ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì„±ê³µ',
                details: {
                    username: playerData.username,
                    level: playerData.level,
                    experience: playerData.experience
                }
            };
        }, gamificationTestContainer);
        
        runTest('ë ˆë²¨ ì‹œìŠ¤í…œ', () => {
            const levelSystem = gameSystem.levelSystem;
            if (!levelSystem || !levelSystem.levels) {
                return { status: 'fail', message: 'ë ˆë²¨ ì‹œìŠ¤í…œ ì—†ìŒ' };
            }
            
            // ë ˆë²¨ 1-10 ê²€ì¦
            const level10 = levelSystem.levels.find(l => l.level === 10);
            if (!level10 || !level10.rewards) {
                return { status: 'fail', message: 'ë ˆë²¨ ë°ì´í„° ë¶ˆì™„ì „' };
            }
            
            return { 
                status: 'pass', 
                message: 'ë ˆë²¨ ì‹œìŠ¤í…œ ì •ìƒ',
                details: {
                    totalLevels: levelSystem.levels.length,
                    level10Rewards: level10.rewards
                }
            };
        }, gamificationTestContainer);
        
        runTest('ì—…ì  ì‹œìŠ¤í…œ', () => {
            const achievements = gameSystem.achievements.achievements;
            if (!achievements || achievements.length < 5) {
                return { status: 'fail', message: 'ì—…ì  ë°ì´í„° ë¶€ì¡±' };
            }
            
            const hasAllTypes = achievements.some(a => a.id === 'first_correct') &&
                               achievements.some(a => a.id === 'chemistry_master');
            
            if (!hasAllTypes) {
                return { status: 'warning', message: 'í•µì‹¬ ì—…ì  ëˆ„ë½' };
            }
            
            return { 
                status: 'pass', 
                message: `${achievements.length}ê°œ ì—…ì  í™•ì¸`,
                details: {
                    achievementIds: achievements.map(a => a.id)
                }
            };
        }, gamificationTestContainer);

        // 6. ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸
        const integrationTestContainer = document.getElementById('integration-test');
        
        runTest('ì „ì—­ í•¨ìˆ˜ ì ‘ê·¼ì„±', () => {
            const requiredFunctions = [
                'generateProblem',
                'generateTopicProblem',
                'getTopicContent',
                'generateEnhancedProblem',
                'addGameExperience',
                'addGameCoins'
            ];
            
            const missing = requiredFunctions.filter(fn => typeof window[fn] !== 'function');
            
            if (missing.length > 0) {
                return { 
                    status: 'fail', 
                    message: `ëˆ„ë½ëœ ì „ì—­ í•¨ìˆ˜: ${missing.join(', ')}`
                };
            }
            
            return { 
                status: 'pass', 
                message: 'ëª¨ë“  í•„ìˆ˜ ì „ì—­ í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥'
            };
        }, integrationTestContainer);
        
        runTest('ë¬¸ì œ í’€ì´ ì‹œë®¬ë ˆì´ì…˜', () => {
            try {
                // ë¬¸ì œ ìƒì„±
                const problem = generateProblem('easy');
                
                // ì •ë‹µ í™•ì¸ ì‹œë®¬ë ˆì´ì…˜
                if (problem.type === 'multiple-choice') {
                    const userAnswer = problem.correctIndex;
                    const isCorrect = checkUserAnswer(userAnswer.toString(), problem);
                    
                    if (typeof isCorrect !== 'boolean') {
                        return { status: 'fail', message: 'ì •ë‹µ í™•ì¸ í•¨ìˆ˜ ì˜¤ë¥˜' };
                    }
                    
                    return { 
                        status: 'pass', 
                        message: 'ë¬¸ì œ í’€ì´ ì‹œë®¬ë ˆì´ì…˜ ì„±ê³µ',
                        details: {
                            problemType: problem.type,
                            question: problem.question.substring(0, 50) + '...',
                            correctlyAnswered: isCorrect
                        }
                    };
                }
                
                return { status: 'pass', message: 'ë¬¸ì œ ìƒì„± ì„±ê³µ' };
            } catch (error) {
                return { status: 'fail', message: error.message };
            }
        }, integrationTestContainer);

        // í™”í•™ ê³µì‹ ë° í‘œê¸° ê²€ì¦
        runTest('í™”í•™ì‹ í‘œê¸° ì •í™•ì„±', () => {
            const formulas = [
                { formula: 'Hâ‚‚O', name: 'ë¬¼' },
                { formula: 'COâ‚‚', name: 'ì´ì‚°í™”íƒ„ì†Œ' },
                { formula: 'NHâ‚ƒ', name: 'ì•”ëª¨ë‹ˆì•„' },
                { formula: 'CHâ‚„', name: 'ë©”íƒ„' },
                { formula: 'NaCl', name: 'ì—¼í™”ë‚˜íŠ¸ë¥¨' }
            ];
            
            const errors = [];
            
            // ë¬¸ì œì—ì„œ í™”í•™ì‹ í™•ì¸
            const problem = dynamicProblemGenerators.formulaProblem();
            if (problem && problem.answer) {
                // ì•„ë˜ì²¨ìê°€ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë˜ëŠ”ì§€ í™•ì¸
                const hasSubscript = problem.explanation && problem.explanation.includes('â‚‚');
                if (!hasSubscript && problem.explanation.includes('H2O')) {
                    errors.push('í™”í•™ì‹ ì•„ë˜ì²¨ì í‘œê¸° ì˜¤ë¥˜');
                }
            }
            
            if (errors.length > 0) {
                return { 
                    status: 'warning', 
                    message: 'í™”í•™ì‹ í‘œê¸° ê°œì„  í•„ìš”',
                    details: errors
                };
            }
            
            return { 
                status: 'pass', 
                message: 'í™”í•™ì‹ í‘œê¸° ì •í™•'
            };
        }, integrationTestContainer);

        // ìµœì¢… ë³´ê³ ì„œ ìƒì„±
        setTimeout(() => {
            const finalReport = document.getElementById('final-report');
            const successRate = (testResults.passed / testResults.total * 100).toFixed(1);
            
            // ìš”ì•½ í†µê³„ í‘œì‹œ
            document.getElementById('test-summary').innerHTML = `
                <div class="stat-box">
                    <h3>${testResults.total}</h3>
                    <p>ì „ì²´ í…ŒìŠ¤íŠ¸</p>
                </div>
                <div class="stat-box" style="background: #c8e6c9;">
                    <h3>${testResults.passed}</h3>
                    <p>ì„±ê³µ</p>
                </div>
                <div class="stat-box" style="background: #fff9c4;">
                    <h3>${testResults.warnings}</h3>
                    <p>ê²½ê³ </p>
                </div>
                <div class="stat-box" style="background: #ffcdd2;">
                    <h3>${testResults.failed}</h3>
                    <p>ì‹¤íŒ¨</p>
                </div>
            `;
            
            // ì„±ê³µë¥  ì§„í–‰ ë§‰ëŒ€
            const progressBar = `
                <div style="margin: 20px 0;">
                    <h3>ì „ì²´ ì„±ê³µë¥ : ${successRate}%</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${successRate}%;"></div>
                    </div>
                </div>
            `;
            
            // ì˜¤ë¥˜ ëª©ë¡
            let errorSection = '';
            if (testResults.errors.length > 0) {
                errorSection = `
                    <div class="error-list">
                        <h3>ë°œê²¬ëœ ì˜¤ë¥˜ (${testResults.errors.length}ê°œ)</h3>
                        <ul>
                            ${testResults.errors.map(e => 
                                `<li><strong>${e.test}:</strong> ${e.error}</li>`
                            ).join('')}
                        </ul>
                    </div>
                `;
            }
            
            // ê¶Œì¥ì‚¬í•­
            const recommendations = [];
            if (testResults.warnings > 0) {
                recommendations.push('ê²½ê³  ì‚¬í•­ë“¤ì„ ê²€í† í•˜ì—¬ ê°œì„ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.');
            }
            if (testResults.failed > 0) {
                recommendations.push('ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ë“¤ì„ ìš°ì„ ì ìœ¼ë¡œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.');
            }
            if (successRate < 80) {
                recommendations.push('ì „ì²´ì ì¸ ì‹œìŠ¤í…œ ì•ˆì •ì„± ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.');
            } else if (successRate === 100) {
                recommendations.push('ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤! ğŸ‰');
            }
            
            finalReport.innerHTML = `
                ${progressBar}
                ${errorSection}
                <div style="margin-top: 20px;">
                    <h3>ê¶Œì¥ì‚¬í•­</h3>
                    <ul>
                        ${recommendations.map(r => `<li>${r}</li>`).join('')}
                    </ul>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: #e1f5fe; border-radius: 5px;">
                    <h4>í…ŒìŠ¤íŠ¸ ìš”ì•½</h4>
                    <p>í™”í•™ í•™ìŠµ í”„ë¡œê·¸ë¨ì˜ ì£¼ìš” êµ¬ì„± ìš”ì†Œë“¤ì„ ì¢…í•©ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•œ ê²°ê³¼, 
                    ì „ì²´ ${testResults.total}ê°œ í…ŒìŠ¤íŠ¸ ì¤‘ ${testResults.passed}ê°œê°€ ì„±ê³µí–ˆìŠµë‹ˆë‹¤.</p>
                    <p>í”„ë¡œê·¸ë¨ì€ ${successRate >= 80 ? 'ì•ˆì •ì ìœ¼ë¡œ ì‘ë™' : 'ì¼ë¶€ ê°œì„ ì´ í•„ìš”'}í•˜ë©°, 
                    ì¤‘í•™ìƒë“¤ì´ í™”í•™ì„ í•™ìŠµí•˜ëŠ” ë° ${successRate >= 90 ? 'ë§¤ìš° ì í•©' : 'ì í•©'}í•œ ìƒíƒœì…ë‹ˆë‹¤.</p>
                </div>
            `;
        }, 100);
    </script>
</body>
</html>