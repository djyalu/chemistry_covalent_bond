<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í™”í•™ ì½˜í…ì¸  ê³¼í•™ì  ì •í™•ì„± ê²€ì¦</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f8f9fa; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .validation-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .correct { background: #d4edda; border-color: #c3e6cb; color: #155724; }
        .incorrect { background: #f8d7da; border-color: #f5c6cb; color: #721c24; }
        .warning { background: #fff3cd; border-color: #ffeeba; color: #856404; }
        .info { background: #cce7ff; border-color: #b3d9ff; color: #004085; }
        h2 { color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { padding: 8px; text-align: left; border: 1px solid #ddd; }
        th { background: #007bff; color: white; }
        .formula { font-family: 'Courier New', monospace; font-weight: bold; }
        .explanation { font-style: italic; color: #666; margin-top: 5px; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¬ í™”í•™ ì½˜í…ì¸  ê³¼í•™ì  ì •í™•ì„± ê²€ì¦ ë³´ê³ ì„œ</h1>
        <p>ìƒì„± ì‹œê°„: <span id="validation-time"></span></p>

        <!-- í™”í•™ì‹ ì •í™•ì„± ê²€ì¦ -->
        <div class="validation-section">
            <h2>1. í™”í•™ì‹ ë° ë¶„ì êµ¬ì¡° ì •í™•ì„±</h2>
            <div id="formula-validation"></div>
        </div>

        <!-- ë¬¸ì œ ë‚´ìš© ì •í™•ì„± ê²€ì¦ -->
        <div class="validation-section">
            <h2>2. ë¬¸ì œ ë‚´ìš©ì˜ ê³¼í•™ì  ì •í™•ì„±</h2>
            <div id="problem-content-validation"></div>
        </div>

        <!-- í•™ìŠµ ìë£Œ ì •í™•ì„± ê²€ì¦ -->
        <div class="validation-section">
            <h2>3. í•™ìŠµ ìë£Œ ë‚´ìš© ê²€ì¦</h2>
            <div id="content-accuracy-validation"></div>
        </div>

        <!-- ë¬¼ë¦¬í™”í•™ì  ë°ì´í„° ê²€ì¦ -->
        <div class="validation-section">
            <h2>4. ë¬¼ë¦¬í™”í•™ì  ë°ì´í„° ê²€ì¦</h2>
            <div id="physical-data-validation"></div>
        </div>

        <!-- ì¤‘í•™ìƒ ìˆ˜ì¤€ ì í•©ì„± ê²€ì¦ -->
        <div class="validation-section">
            <h2>5. ì¤‘í•™ìƒ ìˆ˜ì¤€ ì í•©ì„±</h2>
            <div id="grade-level-validation"></div>
        </div>

        <!-- ì¢…í•© í‰ê°€ -->
        <div class="validation-section">
            <h2>ì¢…í•© í‰ê°€ ë° ê¶Œì¥ì‚¬í•­</h2>
            <div id="overall-assessment"></div>
        </div>
    </div>

    <script src="problems.js"></script>
    <script src="content.js"></script>
    <script src="molecule-viewer.js"></script>
    
    <script>
        document.getElementById('validation-time').textContent = new Date().toLocaleString('ko-KR');

        // 1. í™”í•™ì‹ ë° ë¶„ì êµ¬ì¡° ì •í™•ì„± ê²€ì¦
        function validateFormulas() {
            const results = [];
            
            // ì•Œë ¤ì§„ ì˜¬ë°”ë¥¸ í™”í•™ì‹ê³¼ êµ¬ì¡°
            const knownMolecules = {
                'H2O': {
                    name: 'ë¬¼',
                    atoms: 3,
                    bonds: 2,
                    geometry: 'bent',
                    bondAngle: 104.5,
                    polarityInfo: 'ê·¹ì„± ë¶„ì'
                },
                'CH4': {
                    name: 'ë©”íƒ„',
                    atoms: 5,
                    bonds: 4,
                    geometry: 'tetrahedral',
                    bondAngle: 109.5,
                    polarityInfo: 'ë¬´ê·¹ì„± ë¶„ì'
                },
                'CO2': {
                    name: 'ì´ì‚°í™”íƒ„ì†Œ',
                    atoms: 3,
                    bonds: 2,
                    geometry: 'linear',
                    bondAngle: 180,
                    polarityInfo: 'ë¬´ê·¹ì„± ë¶„ì'
                },
                'NH3': {
                    name: 'ì•”ëª¨ë‹ˆì•„',
                    atoms: 4,
                    bonds: 3,
                    geometry: 'trigonal pyramidal',
                    bondAngle: 107,
                    polarityInfo: 'ê·¹ì„± ë¶„ì'
                },
                'NaCl': {
                    name: 'ì—¼í™”ë‚˜íŠ¸ë¥¨',
                    atoms: 2,
                    bonds: 1,
                    geometry: 'ionic',
                    bondType: 'ionic',
                    polarityInfo: 'ì´ì˜¨ í™”í•©ë¬¼'
                }
            };

            const viewer = new MoleculeViewer('temp');
            
            Object.entries(knownMolecules).forEach(([formula, expected]) => {
                const molecule = viewer.molecules[formula];
                if (molecule) {
                    let status = 'correct';
                    let issues = [];
                    
                    // ì›ì ìˆ˜ í™•ì¸
                    if (molecule.atoms.length !== expected.atoms) {
                        status = 'incorrect';
                        issues.push(`ì›ì ìˆ˜ ì˜¤ë¥˜: ì˜ˆìƒ ${expected.atoms}, ì‹¤ì œ ${molecule.atoms.length}`);
                    }
                    
                    // ê²°í•© ìˆ˜ í™•ì¸
                    if (molecule.bonds.length !== expected.bonds) {
                        status = 'incorrect';
                        issues.push(`ê²°í•© ìˆ˜ ì˜¤ë¥˜: ì˜ˆìƒ ${expected.bonds}, ì‹¤ì œ ${molecule.bonds.length}`);
                    }
                    
                    // ê²°í•© ìœ í˜• í™•ì¸ (ì´ì˜¨ ê²°í•©)
                    if (expected.bondType === 'ionic') {
                        const hasIonicBond = molecule.bonds.some(b => b.type === 'ionic');
                        if (!hasIonicBond) {
                            status = 'warning';
                            issues.push('ì´ì˜¨ ê²°í•© í‘œì‹œ ëˆ„ë½');
                        }
                    }
                    
                    results.push({
                        formula: formula,
                        name: expected.name,
                        status: status,
                        issues: issues,
                        expected: expected,
                        actual: {
                            atoms: molecule.atoms.length,
                            bonds: molecule.bonds.length
                        }
                    });
                } else {
                    results.push({
                        formula: formula,
                        name: expected.name,
                        status: 'incorrect',
                        issues: ['ë¶„ì ë°ì´í„° ì—†ìŒ'],
                        expected: expected,
                        actual: null
                    });
                }
            });
            
            return results;
        }

        // 2. ë¬¸ì œ ë‚´ìš©ì˜ ê³¼í•™ì  ì •í™•ì„± ê²€ì¦
        function validateProblemContent() {
            const validationResults = [];
            
            // ê° ë‚œì´ë„ë³„ë¡œ ì—¬ëŸ¬ ë¬¸ì œ ìƒì„±í•˜ì—¬ ê²€ì¦
            ['easy', 'medium', 'hard'].forEach(difficulty => {
                for (let i = 0; i < 10; i++) {
                    const problem = generateProblem(difficulty);
                    const validation = validateSingleProblem(problem, difficulty);
                    if (validation.issues.length > 0) {
                        validationResults.push(validation);
                    }
                }
            });
            
            return validationResults;
        }
        
        function validateSingleProblem(problem, difficulty) {
            const issues = [];
            
            // ê¸°ë³¸ êµ¬ì¡° ê²€ì¦
            if (!problem.question || problem.question.length < 10) {
                issues.push('ë¬¸ì œ ë‚´ìš©ì´ ë„ˆë¬´ ì§§ìŒ');
            }
            
            if (!problem.explanation) {
                issues.push('ì„¤ëª…ì´ ì—†ìŒ');
            }
            
            // ê³¼í•™ì  ì •í™•ì„± ê²€ì¦
            const scientificChecks = [
                {
                    pattern: /ì„¤íƒ•.*ì´ì˜¨/,
                    error: 'ì„¤íƒ•ì„ ì´ì˜¨í™”í•©ë¬¼ë¡œ ì˜ëª» ë¶„ë¥˜'
                },
                {
                    pattern: /ë¬¼.*ì´ì˜¨ê²°í•©/,
                    error: 'ë¬¼ì„ ì´ì˜¨ê²°í•©ìœ¼ë¡œ ì˜ëª» ì„¤ëª…'
                },
                {
                    pattern: /ì†Œê¸ˆ.*ê³µìœ ê²°í•©/,
                    error: 'ì†Œê¸ˆì„ ê³µìœ ê²°í•©ìœ¼ë¡œ ì˜ëª» ì„¤ëª…'
                },
                {
                    pattern: /ê¸ˆì†.*ê³µìœ ê²°í•©/,
                    error: 'ê¸ˆì†ì„ ê³µìœ ê²°í•©ìœ¼ë¡œ ì˜ëª» ì„¤ëª…'
                }
            ];
            
            const fullText = problem.question + ' ' + (problem.explanation || '');
            scientificChecks.forEach(check => {
                if (check.pattern.test(fullText)) {
                    issues.push(check.error);
                }
            });
            
            // í™”í•™ì‹ í‘œê¸° ê²€ì¦
            const formulaRegex = /[A-Z][a-z]?[0-9]/g;
            const formulas = fullText.match(formulaRegex);
            if (formulas) {
                formulas.forEach(formula => {
                    // ì•„ë˜ì²¨ì í‘œê¸° í™•ì¸
                    if (!/[â‚€-â‚‰]/.test(fullText) && /[0-9]/.test(formula)) {
                        issues.push(`í™”í•™ì‹ ${formula}ì˜ ì•„ë˜ì²¨ì í‘œê¸° ë¯¸ì‚¬ìš©`);
                    }
                });
            }
            
            return {
                question: problem.question.substring(0, 50) + '...',
                difficulty: difficulty,
                type: problem.type,
                issues: issues
            };
        }

        // 3. í•™ìŠµ ìë£Œ ë‚´ìš© ê²€ì¦
        function validateLearningContent() {
            const topics = ['covalent', 'ionic', 'molecular', 'bonding'];
            const validationResults = [];
            
            topics.forEach(topic => {
                const content = getTopicContent(topic);
                const issues = [];
                
                // í•„ìˆ˜ ê³¼í•™ ê°œë… í™•ì¸
                const requiredConcepts = {
                    covalent: [
                        { term: 'ì „ì ê³µìœ ', importance: 'critical' },
                        { term: 'ë¹„ê¸ˆì†', importance: 'high' },
                        { term: 'ë¶„ì', importance: 'high' },
                        { term: 'ë‹¨ì¼ê²°í•©', importance: 'medium' },
                        { term: 'ì´ì¤‘ê²°í•©', importance: 'medium' }
                    ],
                    ionic: [
                        { term: 'ì–‘ì´ì˜¨', importance: 'critical' },
                        { term: 'ìŒì´ì˜¨', importance: 'critical' },
                        { term: 'ì •ì „ê¸°ì  ì¸ë ¥', importance: 'high' },
                        { term: 'ê¸ˆì†', importance: 'high' },
                        { term: 'ë¹„ê¸ˆì†', importance: 'high' },
                        { term: 'ì „ì ì´ë™', importance: 'medium' }
                    ],
                    molecular: [
                        { term: 'VSEPR', importance: 'critical' },
                        { term: '3ì°¨ì›', importance: 'high' },
                        { term: 'ì „ììŒ', importance: 'high' },
                        { term: 'ì •ì‚¬ë©´ì²´', importance: 'medium' },
                        { term: 'ì§ì„ í˜•', importance: 'medium' }
                    ],
                    bonding: [
                        { term: 'ê²°í•© ì—ë„ˆì§€', importance: 'critical' },
                        { term: 'ê²°í•© ê¸¸ì´', importance: 'high' },
                        { term: 'ì‚¼ì¤‘ê²°í•©', importance: 'medium' },
                        { term: 'kJ/mol', importance: 'low' }
                    ]
                };
                
                const topicConcepts = requiredConcepts[topic] || [];
                const missingCritical = [];
                const missingHigh = [];
                
                topicConcepts.forEach(concept => {
                    if (!content.includes(concept.term)) {
                        if (concept.importance === 'critical') {
                            missingCritical.push(concept.term);
                        } else if (concept.importance === 'high') {
                            missingHigh.push(concept.term);
                        }
                    }
                });
                
                if (missingCritical.length > 0) {
                    issues.push(`í•µì‹¬ ê°œë… ëˆ„ë½: ${missingCritical.join(', ')}`);
                }
                if (missingHigh.length > 0) {
                    issues.push(`ì¤‘ìš” ê°œë… ëˆ„ë½: ${missingHigh.join(', ')}`);
                }
                
                // ê³¼í•™ì  ì˜¤ë¥˜ ê²€ì¦
                const errorChecks = [
                    {
                        pattern: /ì„¤íƒ•.*ì´ì˜¨í™”í•©ë¬¼/,
                        error: 'ì„¤íƒ•ì„ ì´ì˜¨í™”í•©ë¬¼ë¡œ ì˜ëª» ë¶„ë¥˜'
                    },
                    {
                        pattern: /ê³µìœ ê²°í•©.*ê¸ˆì†/,
                        error: 'ê¸ˆì†ì˜ ê³µìœ ê²°í•© ì„¤ëª… ì˜¤ë¥˜'
                    },
                    {
                        pattern: /ì´ì˜¨ê²°í•©.*ì „ì ê³µìœ /,
                        error: 'ì´ì˜¨ê²°í•©ê³¼ ì „ì ê³µìœ  ê°œë… í˜¼ë™'
                    }
                ];
                
                errorChecks.forEach(check => {
                    if (check.pattern.test(content)) {
                        issues.push(check.error);
                    }
                });
                
                validationResults.push({
                    topic: topic,
                    contentLength: content.length,
                    issues: issues,
                    conceptCoverage: {
                        total: topicConcepts.length,
                        covered: topicConcepts.length - missingCritical.length - missingHigh.length
                    }
                });
            });
            
            return validationResults;
        }

        // 4. ë¬¼ë¦¬í™”í•™ì  ë°ì´í„° ê²€ì¦
        function validatePhysicalData() {
            const dataChecks = [];
            
            // ê²°í•© ì—ë„ˆì§€ ë°ì´í„° í™•ì¸
            const bondEnergyContent = getTopicContent('bonding');
            
            const knownBondEnergies = {
                'C-C': { range: [340, 360], unit: 'kJ/mol' },
                'C=C': { range: [600, 620], unit: 'kJ/mol' },
                'Câ‰¡C': { range: [830, 850], unit: 'kJ/mol' },
                'H-F': { range: [560, 570], unit: 'kJ/mol' }
            };
            
            Object.entries(knownBondEnergies).forEach(([bond, data]) => {
                const bondRegex = new RegExp(bond.replace(/[=â‰¡]/g, '[=â‰¡]') + '.*?(\\d+).*?kJ', 'i');
                const match = bondEnergyContent.match(bondRegex);
                
                if (match) {
                    const value = parseInt(match[1]);
                    const inRange = value >= data.range[0] && value <= data.range[1];
                    
                    dataChecks.push({
                        bond: bond,
                        reported: value,
                        expected: data.range,
                        status: inRange ? 'correct' : 'incorrect',
                        issue: inRange ? null : `ê°’ì´ ì˜ˆìƒ ë²”ìœ„(${data.range[0]}-${data.range[1]})ë¥¼ ë²—ì–´ë‚¨`
                    });
                } else {
                    dataChecks.push({
                        bond: bond,
                        reported: null,
                        expected: data.range,
                        status: 'missing',
                        issue: 'ë°ì´í„° ì—†ìŒ'
                    });
                }
            });
            
            return dataChecks;
        }

        // 5. ì¤‘í•™ìƒ ìˆ˜ì¤€ ì í•©ì„± ê²€ì¦
        function validateGradeLevel() {
            const issues = [];
            const recommendations = [];
            
            // ì–´íœ˜ ìˆ˜ì¤€ ê²€ì‚¬
            const difficultTerms = [
                'ì „ê¸°ìŒì„±ë„', 'ê¶¤ë„ í˜¼ì„±í™”', 'ê³µëª… êµ¬ì¡°', 'ë¶„ì ê¶¤ë„', 
                'ë°˜ë°ë¥´ë°œìŠ¤ í˜', 'ìŒê·¹ì ëª¨ë©˜íŠ¸', 'ì—”íƒˆí”¼', 'ììœ  ì—ë„ˆì§€'
            ];
            
            const topics = ['covalent', 'ionic', 'molecular', 'bonding'];
            topics.forEach(topic => {
                const content = getTopicContent(topic);
                const foundDifficult = difficultTerms.filter(term => content.includes(term));
                
                if (foundDifficult.length > 0) {
                    issues.push(`${topic} ì£¼ì œì—ì„œ ê³ ë“±í•™êµ/ëŒ€í•™ ìˆ˜ì¤€ ìš©ì–´ ë°œê²¬: ${foundDifficult.join(', ')}`);
                }
            });
            
            // ë¬¸ì œ ë³µì¡ë„ ê²€ì‚¬
            const problems = [];
            for (let i = 0; i < 20; i++) {
                problems.push(generateProblem('hard'));
            }
            
            const complexProblems = problems.filter(p => {
                const text = p.question + (p.explanation || '');
                return text.length > 200 || 
                       (text.match(/[,;]/g) || []).length > 3 ||
                       text.includes('ê³„ì‚°í•˜ì‹œì˜¤') ||
                       text.includes('ìœ ë„í•˜ì‹œì˜¤');
            });
            
            if (complexProblems.length > problems.length * 0.3) {
                issues.push('ì–´ë ¤ìš´ ë¬¸ì œì˜ ë³µì¡ë„ê°€ ì¤‘í•™ìƒ ìˆ˜ì¤€ì„ ì´ˆê³¼í•  ìˆ˜ ìˆìŒ');
            }
            
            // ê¶Œì¥ì‚¬í•­ ìƒì„±
            if (issues.length === 0) {
                recommendations.push('ì½˜í…ì¸ ê°€ ì¤‘í•™ìƒ ìˆ˜ì¤€ì— ì í•©í•©ë‹ˆë‹¤.');
            } else {
                recommendations.push('ì¼ë¶€ ë‚´ìš©ì˜ ë‚œì´ë„ ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                recommendations.push('ê³ ë“±í•™êµ ìˆ˜ì¤€ ìš©ì–´ëŠ” ê°ì£¼ë‚˜ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì¶”ê°€í•˜ì„¸ìš”.');
            }
            
            return { issues, recommendations };
        }

        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜ë“¤
        function displayFormulaValidation() {
            const results = validateFormulas();
            const container = document.getElementById('formula-validation');
            
            let html = '<table><tr><th>ë¶„ìì‹</th><th>ì´ë¦„</th><th>ìƒíƒœ</th><th>ê²€ì¦ ê²°ê³¼</th></tr>';
            
            results.forEach(result => {
                const statusClass = result.status === 'correct' ? 'correct' : 
                                   result.status === 'warning' ? 'warning' : 'incorrect';
                const statusText = result.status === 'correct' ? 'ì •í™•' : 
                                  result.status === 'warning' ? 'ê²½ê³ ' : 'ì˜¤ë¥˜';
                
                html += `
                    <tr class="${statusClass}">
                        <td class="formula">${result.formula}</td>
                        <td>${result.name}</td>
                        <td>${statusText}</td>
                        <td>${result.issues.length === 0 ? 'ë¬¸ì œì—†ìŒ' : result.issues.join(', ')}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            container.innerHTML = html;
        }

        function displayProblemValidation() {
            const results = validateProblemContent();
            const container = document.getElementById('problem-content-validation');
            
            if (results.length === 0) {
                container.innerHTML = '<div class="correct">âœ“ ëª¨ë“  ë¬¸ì œì˜ ê³¼í•™ì  ë‚´ìš©ì´ ì •í™•í•©ë‹ˆë‹¤.</div>';
                return;
            }
            
            let html = '<div class="warning">ë‹¤ìŒ ë¬¸ì œë“¤ì—ì„œ ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤:</div>';
            html += '<table><tr><th>ë¬¸ì œ</th><th>ë‚œì´ë„</th><th>ìœ í˜•</th><th>ë°œê²¬ëœ ë¬¸ì œ</th></tr>';
            
            results.slice(0, 10).forEach(result => { // ìµœëŒ€ 10ê°œë§Œ í‘œì‹œ
                html += `
                    <tr>
                        <td>${result.question}</td>
                        <td>${result.difficulty}</td>
                        <td>${result.type}</td>
                        <td>${result.issues.join(', ')}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            if (results.length > 10) {
                html += `<p>... ë° ${results.length - 10}ê°œ ì¶”ê°€ ë¬¸ì œ</p>`;
            }
            
            container.innerHTML = html;
        }

        function displayContentValidation() {
            const results = validateLearningContent();
            const container = document.getElementById('content-accuracy-validation');
            
            let html = '<table><tr><th>ì£¼ì œ</th><th>ì½˜í…ì¸  ê¸¸ì´</th><th>ê°œë… í¬í•¨ë¥ </th><th>ë°œê²¬ëœ ë¬¸ì œ</th></tr>';
            
            results.forEach(result => {
                const coverage = (result.conceptCoverage.covered / result.conceptCoverage.total * 100).toFixed(1);
                const statusClass = result.issues.length === 0 ? 'correct' : 'warning';
                
                html += `
                    <tr class="${statusClass}">
                        <td>${result.topic}</td>
                        <td>${result.contentLength} ë¬¸ì</td>
                        <td>${coverage}% (${result.conceptCoverage.covered}/${result.conceptCoverage.total})</td>
                        <td>${result.issues.length === 0 ? 'ë¬¸ì œì—†ìŒ' : result.issues.join(', ')}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            container.innerHTML = html;
        }

        function displayPhysicalDataValidation() {
            const results = validatePhysicalData();
            const container = document.getElementById('physical-data-validation');
            
            let html = '<table><tr><th>ê²°í•©</th><th>ë³´ê³ ëœ ê°’</th><th>ì˜ˆìƒ ë²”ìœ„</th><th>ìƒíƒœ</th><th>ë¹„ê³ </th></tr>';
            
            results.forEach(result => {
                const statusClass = result.status === 'correct' ? 'correct' : 
                                   result.status === 'missing' ? 'warning' : 'incorrect';
                const statusText = result.status === 'correct' ? 'ì •í™•' : 
                                  result.status === 'missing' ? 'ëˆ„ë½' : 'ë¶€ì •í™•';
                
                html += `
                    <tr class="${statusClass}">
                        <td class="formula">${result.bond}</td>
                        <td>${result.reported || 'N/A'} kJ/mol</td>
                        <td>${result.expected[0]}-${result.expected[1]} kJ/mol</td>
                        <td>${statusText}</td>
                        <td>${result.issue || 'ë¬¸ì œì—†ìŒ'}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            container.innerHTML = html;
        }

        function displayGradeLevelValidation() {
            const results = validateGradeLevel();
            const container = document.getElementById('grade-level-validation');
            
            let html = '';
            
            if (results.issues.length > 0) {
                html += '<div class="warning"><h4>ë°œê²¬ëœ ë¬¸ì œ:</h4><ul>';
                results.issues.forEach(issue => {
                    html += `<li>${issue}</li>`;
                });
                html += '</ul></div>';
            }
            
            html += '<div class="info"><h4>ê¶Œì¥ì‚¬í•­:</h4><ul>';
            results.recommendations.forEach(rec => {
                html += `<li>${rec}</li>`;
            });
            html += '</ul></div>';
            
            container.innerHTML = html;
        }

        function displayOverallAssessment() {
            const container = document.getElementById('overall-assessment');
            
            // ê° ì„¹ì…˜ì˜ ê²°ê³¼ë¥¼ ì¢…í•©
            const formulaResults = validateFormulas();
            const problemResults = validateProblemContent();
            const contentResults = validateLearningContent();
            const physicalResults = validatePhysicalData();
            const gradeResults = validateGradeLevel();
            
            const totalIssues = problemResults.length + 
                               contentResults.reduce((sum, r) => sum + r.issues.length, 0) +
                               physicalResults.filter(r => r.status !== 'correct').length +
                               gradeResults.issues.length;
            
            let assessmentLevel, color, recommendations;
            
            if (totalIssues === 0) {
                assessmentLevel = 'ìš°ìˆ˜';
                color = '#28a745';
                recommendations = [
                    'ëª¨ë“  ê³¼í•™ì  ë‚´ìš©ì´ ì •í™•í•˜ê³  ì¤‘í•™ìƒ ìˆ˜ì¤€ì— ì í•©í•©ë‹ˆë‹¤.',
                    'í˜„ì¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ë©° ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ì„¸ìš”.'
                ];
            } else if (totalIssues <= 5) {
                assessmentLevel = 'ì–‘í˜¸';
                color = '#ffc107';
                recommendations = [
                    'ëŒ€ë¶€ë¶„ì˜ ë‚´ìš©ì´ ì •í™•í•˜ë‚˜ ì¼ë¶€ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.',
                    'ë°œê²¬ëœ ë¬¸ì œë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜ì •í•˜ì„¸ìš”.',
                    'ì •ê¸°ì ì¸ ë‚´ìš© ê²€í† ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.'
                ];
            } else {
                assessmentLevel = 'ê°œì„  í•„ìš”';
                color = '#dc3545';
                recommendations = [
                    'ì—¬ëŸ¬ ê³¼í•™ì  ì˜¤ë¥˜ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.',
                    'ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ì—¬ ì²´ê³„ì ìœ¼ë¡œ ìˆ˜ì •í•˜ì„¸ìš”.',
                    'ì „ë¬¸ê°€ ê²€í† ë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”.'
                ];
            }
            
            const html = `
                <div style="border: 3px solid ${color}; padding: 20px; border-radius: 10px; background: ${color}15;">
                    <h3 style="color: ${color}; margin-top: 0;">ì¢…í•© í‰ê°€: ${assessmentLevel}</h3>
                    <p><strong>ë°œê²¬ëœ ì´ ë¬¸ì œ ìˆ˜:</strong> ${totalIssues}ê°œ</p>
                    
                    <h4>ì„¸ë¶€ ê²°ê³¼:</h4>
                    <ul>
                        <li>ë¶„ì êµ¬ì¡° ì •í™•ì„±: ${formulaResults.filter(r => r.status === 'correct').length}/${formulaResults.length} ì •í™•</li>
                        <li>ë¬¸ì œ ë‚´ìš© ì˜¤ë¥˜: ${problemResults.length}ê°œ ë¬¸ì œ ë°œê²¬</li>
                        <li>í•™ìŠµ ìë£Œ ê²€ì¦: ${contentResults.filter(r => r.issues.length === 0).length}/${contentResults.length} ì£¼ì œ ì–‘í˜¸</li>
                        <li>ë¬¼ë¦¬í™”í•™ ë°ì´í„°: ${physicalResults.filter(r => r.status === 'correct').length}/${physicalResults.length} ì •í™•</li>
                        <li>ì¤‘í•™ìƒ ìˆ˜ì¤€ ì í•©ì„±: ${gradeResults.issues.length === 0 ? 'ì í•©' : 'ì¼ë¶€ ì¡°ì • í•„ìš”'}</li>
                    </ul>
                    
                    <h4>ê¶Œì¥ì‚¬í•­:</h4>
                    <ul>
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
            `;
            
            container.innerHTML = html;
        }

        // ëª¨ë“  ê²€ì¦ ì‹¤í–‰
        setTimeout(() => {
            displayFormulaValidation();
            displayProblemValidation();
            displayContentValidation();
            displayPhysicalDataValidation();
            displayGradeLevelValidation();
            displayOverallAssessment();
        }, 100);
    </script>
</body>
</html>