<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¸ì œ í’€ê¸° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .section.active { background-color: #f0f8ff; border-color: #0066cc; }
        .nav-btn { margin: 5px; padding: 10px 15px; border: none; background: #e0e0e0; border-radius: 3px; cursor: pointer; }
        .nav-btn.active { background: #0066cc; color: white; }
        .question-container { background: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .option-label { display: block; margin: 8px 0; padding: 8px; background: white; border: 1px solid #ccc; border-radius: 3px; cursor: pointer; }
        .option-label:hover { background: #f0f0f0; }
        .button-group { margin: 15px 0; }
        .button-group button { margin: 5px; padding: 8px 15px; border: none; border-radius: 3px; cursor: pointer; }
        .submit-btn { background: #28a745; color: white; }
        .next-btn { background: #007bff; color: white; }
        .hint-btn { background: #ffc107; }
        .feedback { margin: 15px 0; padding: 10px; border-radius: 3px; }
        .correct-answer { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .wrong-answer { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
        .debug { background: #e2e3e5; padding: 10px; margin: 10px 0; border-radius: 3px; font-size: 0.9em; }
    </style>
</head>
<body>
    <h1>ğŸ§ª í™”í•™ í•™ìŠµ í”„ë¡œê·¸ë¨ - ë¬¸ì œ í’€ê¸° ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="debug">
        <h3>í…ŒìŠ¤íŠ¸ ì§„í–‰ ìƒí™©:</h3>
        <div id="test-log"></div>
    </div>
    
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ì‹œë®¬ë ˆì´ì…˜ -->
    <nav>
        <button class="nav-btn active" data-section="learn">í•™ìŠµí•˜ê¸°</button>
        <button class="nav-btn" data-section="practice">ë¬¸ì œí’€ê¸°</button>
        <button class="nav-btn" data-section="progress">í•™ìŠµì§„ë„</button>
    </nav>
    
    <!-- í•™ìŠµ ì„¹ì…˜ -->
    <section id="learn" class="section active">
        <h2>í•™ìŠµ ì„¹ì…˜</h2>
        <p>ì—¬ê¸°ëŠ” í•™ìŠµ ë‚´ìš©ì´ í‘œì‹œë˜ëŠ” ê³³ì…ë‹ˆë‹¤.</p>
    </section>
    
    <!-- ë¬¸ì œ í’€ê¸° ì„¹ì…˜ -->
    <section id="practice" class="section">
        <h2>ë¬¸ì œ í’€ì–´ë³´ê¸°</h2>
        
        <div>
            <label>ë‚œì´ë„:</label>
            <select id="difficulty">
                <option value="easy">ì‰¬ì›€</option>
                <option value="medium" selected>ë³´í†µ</option>
                <option value="hard">ì–´ë ¤ì›€</option>
            </select>
        </div>
        
        <div id="question-container" class="question-container">
            <div class="question-header">
                <span id="question-number">ë¬¸ì œ 1</span>
                <span id="score">ì ìˆ˜: 0</span>
            </div>
            
            <div id="question-content" class="question-content">
                <!-- ë¬¸ì œê°€ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>
            
            <div id="answer-section" class="answer-section">
                <!-- ë‹µë³€ ì…ë ¥ ì˜ì—­ -->
            </div>
            
            <div class="button-group">
                <button id="submit-btn" class="submit-btn" onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
                <button id="next-btn" class="next-btn" onclick="loadNextQuestion()" style="display:none;">ë‹¤ìŒ ë¬¸ì œ</button>
                <button id="hint-btn" class="hint-btn" onclick="showSmartHint()">ìŠ¤ë§ˆíŠ¸ íŒíŠ¸</button>
                <button id="visual-aid-btn" class="visual-btn" onclick="showVisualAid()" style="display:none;">ì‹œê°ì  ì„¤ëª…</button>
            </div>
            
            <div id="feedback" class="feedback"></div>
            
            <div id="enhanced-feedback" class="enhanced-feedback" style="display:none;"></div>
            
            <div id="molecule-visualization" class="molecule-viz" style="display:none;">
                <h4>ë¶„ì êµ¬ì¡° ì‹œê°í™”</h4>
                <canvas id="molecule-display" width="400" height="300"></canvas>
                <div class="viz-controls">
                    <button onclick="hideVisualization()">ë‹«ê¸°</button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- í•™ìŠµ ì§„ë„ ì„¹ì…˜ -->
    <section id="progress" class="section">
        <h2>í•™ìŠµ ì§„ë„</h2>
        <p>ì—¬ê¸°ëŠ” ì§„ë„ê°€ í‘œì‹œë˜ëŠ” ê³³ì…ë‹ˆë‹¤.</p>
        
        <!-- ë¯¸ë‹ˆ ëŒ€ì‹œë³´ë“œ ìš”ì†Œë“¤ -->
        <div style="display: none;">
            <span id="current-level">1</span>
            <span id="current-accuracy">0%</span>
            <span id="current-streak">0</span>
            <span id="weak-area">-</span>
        </div>
    </section>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© -->
    <script src="problems.js"></script>
    <script src="app.js"></script>
    
    <script>
        // í…ŒìŠ¤íŠ¸ ë¡œê¹… í•¨ìˆ˜
        function logTest(message, isSuccess = true) {
            const logDiv = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            const status = isSuccess ? 'âœ…' : 'âŒ';
            logDiv.innerHTML += `<div>${timestamp} ${status} ${message}</div>`;
        }

        // í˜ì´ì§€ ë¡œë“œ í›„ í…ŒìŠ¤íŠ¸ ì‹œì‘
        window.addEventListener('load', () => {
            logTest('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            
            // ì ì‹œ í›„ í…ŒìŠ¤íŠ¸ ì§„í–‰
            setTimeout(() => {
                runTests();
            }, 500);
        });

        function runTests() {
            logTest('í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            // 1. ê¸°ë³¸ í•¨ìˆ˜ë“¤ì´ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
            if (typeof generateProblem === 'function') {
                logTest('generateProblem í•¨ìˆ˜ ë¡œë“œë¨');
            } else {
                logTest('generateProblem í•¨ìˆ˜ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ', false);
                return;
            }
            
            // 2. ë¬¸ì œ ìƒì„± í…ŒìŠ¤íŠ¸
            try {
                const testProblem = generateProblem('medium');
                if (testProblem && testProblem.question) {
                    logTest('ë¬¸ì œ ìƒì„± ì„±ê³µ: ' + testProblem.question.substring(0, 30) + '...');
                } else {
                    logTest('ë¬¸ì œ ìƒì„± ì‹¤íŒ¨', false);
                    return;
                }
            } catch (error) {
                logTest('ë¬¸ì œ ìƒì„± ì¤‘ ì˜¤ë¥˜: ' + error.message, false);
                return;
            }
            
            // 3. practice ì„¹ì…˜ìœ¼ë¡œ ì „í™˜ í…ŒìŠ¤íŠ¸
            logTest('practice ì„¹ì…˜ìœ¼ë¡œ ì „í™˜ ì¤‘...');
            setTimeout(() => {
                const practiceBtn = document.querySelector('[data-section="practice"]');
                if (practiceBtn) {
                    practiceBtn.click();
                    
                    // ì ì‹œ í›„ ë¬¸ì œê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
                    setTimeout(() => {
                        const questionContent = document.getElementById('question-content');
                        if (questionContent && questionContent.innerHTML.trim()) {
                            logTest('ë¬¸ì œê°€ ì„±ê³µì ìœ¼ë¡œ í‘œì‹œë¨!');
                            logTest('í‘œì‹œëœ ë‚´ìš©: ' + questionContent.innerHTML.substring(0, 50) + '...');
                            
                            // 4. ë‹µë³€ ì˜ì—­ í™•ì¸
                            const answerSection = document.getElementById('answer-section');
                            if (answerSection && answerSection.innerHTML.trim()) {
                                logTest('ë‹µë³€ ì…ë ¥ ì˜ì—­ì´ ìƒì„±ë¨');
                                testComplete();
                            } else {
                                logTest('ë‹µë³€ ì…ë ¥ ì˜ì—­ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ', false);
                            }
                        } else {
                            logTest('ë¬¸ì œê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ', false);
                        }
                    }, 200);
                } else {
                    logTest('practice ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ', false);
                }
            }, 100);
        }

        function testComplete() {
            logTest('ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼! ë¬¸ì œ í’€ê¸° ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.');
            
            // ì¶”ê°€ ì •ë³´ í‘œì‹œ
            if (currentQuestion) {
                logTest('í˜„ì¬ ë¬¸ì œ íƒ€ì…: ' + currentQuestion.type);
                logTest('í˜„ì¬ ë¬¸ì œ ì ìˆ˜: ' + (currentQuestion.points || 10));
            }
        }

        // ì˜¤ë¥˜ ìºì¹˜
        window.addEventListener('error', (e) => {
            logTest('JavaScript ì˜¤ë¥˜ ë°œìƒ: ' + e.message, false);
        });
    </script>
</body>
</html>